 <script>
              document.addEventListener('DOMContentLoaded', function() {
                document.getElementById('username').addEventListener('input', function() {
                  var username = this.value;
                  var errorMessage = document.getElementById('username-check');
          
                  if (username) {
                    $.ajax({
                      type: "GET",
                      url: "{% url 'login:check_username' %}",
                      data: {'username': username},
                      dataType: 'json',
                      success: function(data) {
                        errorMessage.innerHTML = data.message;
                        if (data.available) {
                          errorMessage.style.color = 'green';
                          document.getElementById('registerButton').disabled = false;
                        } else {
                          errorMessage.style.color = 'red';
                          document.getElementById('registerButton').disabled = true;
                        }
                      },
                      error: function() {
                        errorMessage.innerHTML = 'Error checking username availability.';
                        errorMessage.style.color = 'red';
                        document.getElementById('registerButton').disabled = true;
                      }
                    });
                  } else {
                    errorMessage.innerHTML = '';
                    document.getElementById('registerButton').disabled = true;
                  }
                });
              });
            </script>



<div class="input-group">
    <i class='bx bxs-user'></i>
    <input type="text" placeholder="Username" id="username" name="username">
</div>
<div id="username-check"></div>



from django.http import JsonResponse
from django.contrib.auth.models import User

def check_username(request):
    username = request.GET.get('username')

    if User.objects.filter(username=username).exists():
        return JsonResponse({'available': False, 'message': 'Username already exists'})
    else:
        return JsonResponse({'available': True, 'message': 'Username is available'})
